<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ben Blog</title>
  
  <subtitle>ä¸€ä¸ªæ— èŠçš„åšå®¢ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://smallbenxiong.github.io/"/>
  <updated>2020-01-06T14:25:11.168Z</updated>
  <id>https://smallbenxiong.github.io/</id>
  
  <author>
    <name>Ben</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>TensorFlow | TensorFlowå®ç°å•å˜é‡çº¿æ€§å›å½’</title>
    <link href="https://smallbenxiong.github.io/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"/>
    <id>https://smallbenxiong.github.io/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/</id>
    <published>2020-01-05T16:00:00.000Z</published>
    <updated>2020-01-06T14:25:11.168Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="TensorFlowå®ç°å•å˜é‡çº¿æ€§å›å½’"><a href="#TensorFlowå®ç°å•å˜é‡çº¿æ€§å›å½’" class="headerlink" title="TensorFlowå®ç°å•å˜é‡çº¿æ€§å›å½’"></a>TensorFlowå®ç°å•å˜é‡çº¿æ€§å›å½’</h1><p><strong>å­¦ä¹ çš„å‡½æ•°ä¸ºçº¿æ€§å‡½æ•° y=2x+1</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨Jupyterä¸­æ˜¾ç¤ºå›¾åƒéœ€ä½¿ç”¨matplotlibçš„inlineæ¨¡å¼</span></span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆäººå·¥æ•°æ®é›†"><a href="#ç”Ÿæˆäººå·¥æ•°æ®é›†" class="headerlink" title="ç”Ÿæˆäººå·¥æ•°æ®é›†"></a>ç”Ÿæˆäººå·¥æ•°æ®é›†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®éšæœºç§å­</span></span><br><span class="line">np.random.seed(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›´æ¥é‡‡ç”¨npç”Ÿæˆç­‰å·®æ•°åˆ—çš„æ–¹æ³•ï¼Œç”Ÿæˆ100ä¸ªç‚¹ï¼Œæ¯ä¸ªç‚¹çš„å–å€¼åœ¨-1~1ä¹‹é—´</span></span><br><span class="line">x_data = np.linspace(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># y = 2x + 1 + å™ªå£°,å…¶ä¸­å™ªå£°çš„ç»´åº¦ä¸x_dataä¸€è‡´ã€‚éšæœºæŒ¯å¹…ï¼Œå¹…åº¦è®¾ä¸º0.4</span></span><br><span class="line">y_data = <span class="number">2</span> * x_data + <span class="number">1.0</span> + np.random.randn(*x_data.shape) * <span class="number">0.4</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># numpy.randoom.randn(d0,d1,â€¦,dn)æ˜¯ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªæ ·æœ¬å€¼</span></span><br><span class="line"><span class="comment"># æ ‡å‡†æ­£æ€åˆ†å¸ƒåˆç§°uåˆ†å¸ƒï¼Œæ˜¯ä»¥0ä¸ºå‡å€¼ï¼Œ1ä¸ºæ ‡å‡†å·®çš„æ­£æ€åˆ†å¸ƒï¼Œè®°ä¸ºN(0, 1)</span></span><br><span class="line"></span><br><span class="line">np.random.randn(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><pre><code>array([ 0.79242262,  0.17076445, -1.75374086,  0.63029648,  0.49832921,        1.01813761, -0.84646862,  2.52080763, -1.23238611,  0.72695326])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># x_data.shapeå€¼ä¸ºä¸€ä¸ªå…ƒç»„</span></span><br><span class="line">x_data.shape</span><br></pre></td></tr></table></figure><pre><code>(100,)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®å‚å‰é¢åŠ ä¸Š*æˆ–è€…**æ—¶ï¼Œæ„å‘³ç€æ‹†åŒ…ã€‚å•ä¸ª*è¡¨ç¤ºå°†å…ƒç»„æ‹†æˆä¸€ä¸ªä¸ªå•ç‹¬çš„å®å‚</span></span><br><span class="line"><span class="comment"># np.random.randn(*x_data.shape)å’Œnp.random.randn(100)ä¸€æ ·</span></span><br><span class="line"></span><br><span class="line">np.random.randn(*x_data.shape)</span><br></pre></td></tr></table></figure><pre><code>array([ 0.04595522, -0.48713265,  0.81613236, -0.28143012, -2.33562182,       -1.16727845,  0.45765807,  2.23796561, -1.4812592 , -0.01694532,        1.45073354,  0.60687032, -0.37562084, -1.42192455, -1.7811513 ,       -0.74790579, -0.36840953, -2.24911813, -1.69367504,  0.30364847,       -0.40899234, -0.75483059, -0.40751917, -0.81262476,  0.92751621,        1.63995407,  2.07361553,  0.70979786,  0.74715259,  1.46309548,        1.73844881,  1.46520488,  1.21228341, -0.6346525 , -1.5996985 ,        0.87715281, -0.09383245, -0.05567103, -0.88942073, -1.30095145,        1.40216662,  0.46510099, -1.06503262,  0.39042061,  0.30560017,        0.52184949,  2.23327081, -0.0347021 , -1.27962318,  0.03654264,       -0.64635659,  0.54856784,  0.21054246,  0.34650175, -0.56705117,        0.41367881, -0.51025606,  0.51725935, -0.30100513, -1.11840643,        0.49852362, -0.70609387,  1.4438811 ,  0.44295626,  0.46770521,        0.10134479, -0.05935198, -2.38669774,  1.22217056, -0.81391201,        0.95626186, -0.63851056, -0.14312642, -0.22418983, -1.03849524,       -0.17170905,  0.47634618, -0.41417827, -1.26408334, -0.57321556,        0.24981732,  1.14720208,  0.83594396,  0.28740365, -0.9955963 ,        0.90688947,  0.02421074, -0.23998173,  0.91011056,  0.61784475,        0.49961804, -1.15154425, -0.6105164 , -1.70388541,  0.19443738,        0.02824125,  0.93256051,  0.21204332, -0.36794457,  2.1114884 ])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.randn(<span class="number">100</span>)</span><br></pre></td></tr></table></figure><pre><code>array([-1.02957349, -1.33628031, -0.61056736,  0.52469426, -0.34930813,       -0.44073846, -1.1212876 ,  1.47284473, -0.62337224, -1.08070195,       -0.12253009, -0.8077431 , -0.23255622,  1.33515034, -0.44645673,       -0.04978868, -0.36854478, -0.19173957,  0.81967992,  0.53163372,       -0.34161504, -0.93090048, -0.13421699,  0.83259361, -0.01735327,       -0.12765822, -1.80791662,  0.99396898, -1.49112886, -1.28210748,       -0.37570741,  0.03464388,  0.04507816, -0.76374689, -0.31313851,       -0.60698954, -1.80955123, -0.25551774, -0.69379935,  0.41919776,       -0.14520019,  0.9638013 ,  0.69622199,  0.89940546,  1.20837807,        0.6932537 , -0.16636061,  1.35311311, -0.92862651, -0.03547249,        0.85964595, -0.28749661,  0.71494995, -0.8034526 , -0.54048196,        0.54617743,  0.71188926,  1.19715449, -0.07006703,  0.29822712,        0.62619261,  0.46743206, -1.30262143, -0.57008965,  1.44295001,       -1.24399513,  0.62888033, -0.42559213,  1.00320956, -0.77817761,        0.04894463, -2.02640189, -0.04193635,  1.07454278, -1.5008594 ,        1.18574443, -0.71508124, -0.05123853, -2.77458336,  1.07862813,       -0.87568592, -0.53810932, -1.2782157 , -0.99276945,  1.14342789,       -0.5090726 ,  0.89500094, -0.17620337,  0.34608347, -0.50631013,        0.42716402,  2.58856959,  0.65289301,  0.50583979, -0.47595083,        1.01090874,  1.35920097, -1.70208997, -1.38033223,  2.10177668])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># y = 2x+1+å™ªå£°</span></span><br><span class="line">y_data = <span class="number">2</span> * x_data + <span class="number">1.0</span> + np.random.randn(<span class="number">100</span>) * <span class="number">0.4</span></span><br></pre></td></tr></table></figure><h3 id="matplotlibç”»å‡ºç”Ÿæˆç»“æœ"><a href="#matplotlibç”»å‡ºç”Ÿæˆç»“æœ" class="headerlink" title="matplotlibç”»å‡ºç”Ÿæˆç»“æœ"></a>matplotlibç”»å‡ºç”Ÿæˆç»“æœ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»å‡ºéšæœºç”Ÿæˆæ•°æ®æ•£ç‚¹å›¾</span></span><br><span class="line">plt.scatter(x_data, y_data)</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.collections.PathCollection at 0x22c32a84c18&gt;</code></pre><p><img alt="png" data-src="/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/output_11_1.png" class="lazyload"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»å‡ºæƒ³è¦å­¦ä¹ åˆ°çš„çº¿æ€§å‡½æ•°y = 2x + 1</span></span><br><span class="line">plt.scatter(x_data, y_data)</span><br><span class="line">plt.plot(x_data, <span class="number">1.0</span> + <span class="number">2</span> * x_data, color = <span class="string">'red'</span>, linewidth=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x22c32b14f28&gt;]</code></pre><p><img alt="png" data-src="/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/output_12_1.png" class="lazyload"></p><h2 id="æ„å»ºæ¨¡å‹"><a href="#æ„å»ºæ¨¡å‹" class="headerlink" title="æ„å»ºæ¨¡å‹"></a>æ„å»ºæ¨¡å‹</h2><h3 id="å®šä¹‰xå’Œyçš„å ä½ç¬¦"><a href="#å®šä¹‰xå’Œyçš„å ä½ç¬¦" class="headerlink" title="å®šä¹‰xå’Œyçš„å ä½ç¬¦"></a>å®šä¹‰xå’Œyçš„å ä½ç¬¦</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰è®­ç»ƒæ•°æ®çš„å ä½ç¬¦ï¼Œxæ˜¯ç‰¹å¾å€¼ï¼Œyæ˜¯æ ‡ç­¾çº¸</span></span><br><span class="line">x = tf.placeholder(<span class="string">"float"</span>, name = <span class="string">"x"</span>)</span><br><span class="line">y = tf.placeholder(<span class="string">"float"</span>, name = <span class="string">"y"</span>)</span><br></pre></td></tr></table></figure><h3 id="æ„å»ºå›å½’æ¨¡å‹"><a href="#æ„å»ºå›å½’æ¨¡å‹" class="headerlink" title="æ„å»ºå›å½’æ¨¡å‹"></a>æ„å»ºå›å½’æ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æ¨¡å‹å‡½æ•°</span></span><br><span class="line"><span class="comment"># é€šè¿‡è®­ç»ƒæ¨¡å‹æ±‚å‡ºæœ€åˆé€‚çš„wï¼Œbï¼Œä½¿æ€»çš„æŸå¤±æœ€å°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">model</span><span class="params">(x, w, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tf.multiply(x, w) + b <span class="comment"># w*x+b</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå˜é‡"><a href="#åˆ›å»ºå˜é‡" class="headerlink" title="åˆ›å»ºå˜é‡"></a>åˆ›å»ºå˜é‡</h3><ul><li>å˜é‡å£°æ˜å‡½æ•°ä½¿tf.Variable</li><li>å˜é‡ä½œç”¨æ˜¯ä¿å­˜å’Œæ›´æ–°æ¨¡å‹å‚æ•°   </li><li>å˜é‡çš„åˆå§‹åŒ–å¯ä»¥æ˜¯éšæœºæ•°ã€å¸¸æ•°ï¼Œæˆ–è€…å…¶ä»–å˜é‡çš„åˆå§‹å€¼è®¡ç®—å¾—åˆ°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå˜é‡</span></span><br><span class="line"><span class="comment"># æ„å»ºçº¿æ€§å‡½æ•°çš„æ–œç‡ï¼Œå˜é‡w</span></span><br><span class="line">w = tf.Variable(<span class="number">1.0</span>, name = <span class="string">"w0"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ„å»ºçº¿æ€§å‡½æ•°çš„æˆªè·ï¼Œå˜é‡b</span></span><br><span class="line">b = tf.Variable(<span class="number">0.0</span>, name = <span class="string">"b0"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># predæ˜¯é¢„æµ‹å€¼ï¼Œå‰å‘è®¡ç®—</span></span><br><span class="line">pred = model(x, w, b) <span class="comment">#å³wx+bçš„è®¡ç®—å€¼</span></span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒæ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹"></a>è®­ç»ƒæ¨¡å‹</h2><h3 id="è®¾ç½®è®­ç»ƒå‚æ•°"><a href="#è®¾ç½®è®­ç»ƒå‚æ•°" class="headerlink" title="è®¾ç½®è®­ç»ƒå‚æ•°"></a>è®¾ç½®è®­ç»ƒå‚æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿­ä»£æ¬¡æ•°ï¼ˆè®­ç»ƒè½®æ•°ï¼‰</span></span><br><span class="line">train_epochs = <span class="number">10</span></span><br></pre></td></tr></table></figure><p>å…³äºå­¦ä¹ ç‡ï¼ˆlearning_rateï¼‰çš„è®¾ç½®</p><ul><li>å­¦ä¹ ç‡ä½œç”¨ï¼šæ§åˆ¶å‚æ•°æ›´æ–°çš„å¹…åº¦</li><li>å­¦ä¹ ç‡è®¾ç½®è¿‡å¤§ï¼šå¯èƒ½å¯¼è‡´å‚æ•°åœ¨æå€¼é™„ä»¶æ¥å›æ‘‡æ‘†ï¼Œæ— æ³•ä¿è¯æ”¶æ•›</li><li>å­¦ä¹ ç‡è®¾ç½®å›½å°ï¼šè™½ç„¶èƒ½ä¿è¯æ”¶æ•›ï¼Œä½†æ˜¯ä¼˜åŒ–é€Ÿåº¦å¤§å¤§é™ä½ï¼Œéœ€è¦è¿­ä»£æ¬¡æ•°æ›´å¤šæ¬¡æ•°æ‰èƒ½è¾¾åˆ°æ¯”è¾ƒç†æƒ³çš„ä¼˜åŒ–æ•ˆæœ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­¦ä¹ ç‡</span></span><br><span class="line">learning_rate = <span class="number">0.05</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ§åˆ¶æ˜¾ç¤ºlosså€¼çš„ç²’åº¦</span></span><br><span class="line">display_step = <span class="number">10</span></span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰æŸå¤±å‡½æ•°"><a href="#å®šä¹‰æŸå¤±å‡½æ•°" class="headerlink" title="å®šä¹‰æŸå¤±å‡½æ•°"></a>å®šä¹‰æŸå¤±å‡½æ•°</h3><ul><li>æŸå¤±å‡½æ•°ç”¨äºæè¿°é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ï¼Œä»è€ŒæŒ‡å¯¼æ¨¡å‹æ”¶æ•›æ–¹å‘</li><li>å¸¸è§æŸå¤±å‡½æ•°ï¼šå‡æ–¹å·®ï¼ˆMean Square Errir,MSEï¼‰å’Œäº¤å‰ç†µï¼ˆcross-entropyï¼‰</li></ul><p>$ L_2 æŸå¤±å‡½æ•° $</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡‡ç”¨å‡æ–¹å·®ä½œä¸ºæŸå¤±å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">loss_function = tf.reduce_mean(tf.square(y-pred)) <span class="comment"># reduce_meanå¹³å‡å€¼ï¼Œsquareå¹³æ–¹</span></span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰ä¼˜åŒ–å™¨"><a href="#å®šä¹‰ä¼˜åŒ–å™¨" class="headerlink" title="å®šä¹‰ä¼˜åŒ–å™¨"></a>å®šä¹‰ä¼˜åŒ–å™¨</h3><ul><li>å®šä¹‰ä¼˜åŒ–å™¨Optimizerï¼Œåˆå§‹åŒ–ä¸€ä¸ªGradientDescentOptimizer</li><li>è®¾ç½®å­¦ä¹ ç‡å’Œä¼˜åŒ–ç›®æ ‡ï¼šæœ€å°åŒ–æŸå¤±</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨</span></span><br><span class="line"><span class="comment"># GradientDescentOptimizer(learning_rate)å­¦ä¹ ç‡learning_rateæ¥æŒ‡å¯¼ä¼˜åŒ–</span></span><br><span class="line"><span class="comment"># minimize(loss_function)æŠŠæŸå¤±å‡½æ•°loss_functionæœ€å°åŒ–</span></span><br><span class="line"></span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(loss_function)</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºä¼šè¯"><a href="#åˆ›å»ºä¼šè¯" class="headerlink" title="åˆ›å»ºä¼šè¯"></a>åˆ›å»ºä¼šè¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜ä¼šè¯</span></span><br><span class="line">sess = tf.Session()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å˜é‡åˆå§‹åŒ–</span></span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line"><span class="comment"># initæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦run</span></span><br><span class="line">sess.run(init)</span><br></pre></td></tr></table></figure><h3 id="è¿­ä»£è®­ç»ƒ"><a href="#è¿­ä»£è®­ç»ƒ" class="headerlink" title="è¿­ä»£è®­ç»ƒ"></a>è¿­ä»£è®­ç»ƒ</h3><p>æ¨¡å‹è®­ç»ƒé˜¶æ®µè®¾ç½®è¿­ä»£è½®æ¬¡ï¼Œæ¯æ¬¡é€šè¿‡å°†æ ·æœ¬é€ä¸ªè¾“å…¥æ¨¡å‹ï¼Œè¿›è¡Œæ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ“ä½œï¼Œæ¯è½®è¿­ä»£åç»˜åˆ¶å‡ºæ¨¡å‹æ›²çº¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºæŸå¤±å€¼çš„è®­ç»ƒ</span></span><br><span class="line"><span class="comment"># å¼€å§‹è®­ç»ƒï¼Œè½®æ¬¡ä¸ºepochï¼Œé‡‡ç”¨SGDéšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ–¹æ³•</span></span><br><span class="line">step = <span class="number">0</span>   <span class="comment"># è®°å½•è®­ç»ƒæ­¥æ•°</span></span><br><span class="line">loss_list = []  <span class="comment"># ç”¨äºä¿å­˜losså€¼çš„åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> range(train_epochs):</span><br><span class="line">    <span class="keyword">for</span> xs, ys <span class="keyword">in</span> zip(x_data, y_data):</span><br><span class="line">        <span class="comment"># æ¨¡å‹ä¼˜åŒ–ï¼Œè¿è¡Œä¸¤ä¸ªèŠ‚ç‚¹ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</span></span><br><span class="line">        <span class="comment"># ç»™å ä½ç¬¦xå’Œyå¡«å……çœŸå®å€¼xså’Œys</span></span><br><span class="line">        _, loss = sess.run([optimizer, loss_function], feed_dict=&#123;x:xs, y:ys&#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºæŸå¤±å€¼loss</span></span><br><span class="line">        <span class="comment"># display_stepï¼šæ§åˆ¶æŠ¥å‘Šçš„ç²’åº¦</span></span><br><span class="line">        <span class="comment"># ä¾‹å¦‚ï¼Œå¦‚æœdisplay_stepè®¾ä¸º2ï¼Œåˆ™å°†æ¯è®­ç»ƒ2ä¸ªæ ·æœ¬è¾“å‡ºä¸€æ¬¡æŸå¤±å€¼</span></span><br><span class="line">        <span class="comment"># ä¸è¶…å‚æ•°ä¸åŒï¼Œä¿®æ”¹display_step ä¸ä¼šæ›´æ”¹æ¨¡å‹æ‰€å­¦ä¹ çš„è§„å¾‹</span></span><br><span class="line">        loss_list.append(loss)</span><br><span class="line">        step = step+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> step % display_step == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"Train Epoch:"</span>,<span class="string">'%02d'</span> % (epoch+<span class="number">1</span>), <span class="string">"Step:%03d"</span> % (step),<span class="string">"loss="</span>,<span class="string">"&#123;:.9f&#125;"</span>.format(loss))</span><br><span class="line">        </span><br><span class="line">    b0temp = b.eval(session=sess)</span><br><span class="line">    w0temp = w.eval(session=sess)</span><br><span class="line">    plt.plot (x_data, w0temp * x_data + b0temp) <span class="comment">#ç”»å›¾</span></span><br></pre></td></tr></table></figure><pre><code>Train Epoch: 01 Step:010 loss= 0.053888980Train Epoch: 01 Step:020 loss= 0.000218245Train Epoch: 01 Step:030 loss= 0.019443041Train Epoch: 01 Step:040 loss= 0.589532554Train Epoch: 01 Step:050 loss= 0.000989183Train Epoch: 01 Step:060 loss= 0.142488658Train Epoch: 01 Step:070 loss= 0.046271212Train Epoch: 01 Step:080 loss= 0.008660123Train Epoch: 01 Step:090 loss= 0.241159379Train Epoch: 01 Step:100 loss= 0.000514947Train Epoch: 02 Step:110 loss= 0.317517459Train Epoch: 02 Step:120 loss= 0.032397330Train Epoch: 02 Step:130 loss= 0.093368128Train Epoch: 02 Step:140 loss= 0.332103789Train Epoch: 02 Step:150 loss= 0.060521714Train Epoch: 02 Step:160 loss= 0.024084859Train Epoch: 02 Step:170 loss= 0.178793266Train Epoch: 02 Step:180 loss= 0.006461896Train Epoch: 02 Step:190 loss= 0.129687995Train Epoch: 02 Step:200 loss= 0.013333416Train Epoch: 03 Step:210 loss= 0.129900724Train Epoch: 03 Step:220 loss= 0.023582600Train Epoch: 03 Step:230 loss= 0.096030191Train Epoch: 03 Step:240 loss= 0.317024857Train Epoch: 03 Step:250 loss= 0.069221057Train Epoch: 03 Step:260 loss= 0.018716505Train Epoch: 03 Step:270 loss= 0.193809599Train Epoch: 03 Step:280 loss= 0.009021518Train Epoch: 03 Step:290 loss= 0.121858403Train Epoch: 03 Step:300 loss= 0.015201909Train Epoch: 04 Step:310 loss= 0.117845014Train Epoch: 04 Step:320 loss= 0.022902815Train Epoch: 04 Step:330 loss= 0.096256405Train Epoch: 04 Step:340 loss= 0.315768689Train Epoch: 04 Step:350 loss= 0.069981642Train Epoch: 04 Step:360 loss= 0.018294554Train Epoch: 04 Step:370 loss= 0.195104137Train Epoch: 04 Step:380 loss= 0.009256961Train Epoch: 04 Step:390 loss= 0.121209100Train Epoch: 04 Step:400 loss= 0.015365199Train Epoch: 05 Step:410 loss= 0.116854727Train Epoch: 05 Step:420 loss= 0.022845931Train Epoch: 05 Step:430 loss= 0.096275523Train Epoch: 05 Step:440 loss= 0.315662980Train Epoch: 05 Step:450 loss= 0.070045985Train Epoch: 05 Step:460 loss= 0.018259227Train Epoch: 05 Step:470 loss= 0.195213363Train Epoch: 05 Step:480 loss= 0.009276883Train Epoch: 05 Step:490 loss= 0.121154651Train Epoch: 05 Step:500 loss= 0.015378974Train Epoch: 06 Step:510 loss= 0.116771445Train Epoch: 06 Step:520 loss= 0.022841139Train Epoch: 06 Step:530 loss= 0.096277155Train Epoch: 06 Step:540 loss= 0.315654010Train Epoch: 06 Step:550 loss= 0.070051350Train Epoch: 06 Step:560 loss= 0.018256264Train Epoch: 06 Step:570 loss= 0.195222735Train Epoch: 06 Step:580 loss= 0.009278628Train Epoch: 06 Step:590 loss= 0.121149838Train Epoch: 06 Step:600 loss= 0.015380217Train Epoch: 07 Step:610 loss= 0.116764441Train Epoch: 07 Step:620 loss= 0.022840742Train Epoch: 07 Step:630 loss= 0.096277267Train Epoch: 07 Step:640 loss= 0.315653324Train Epoch: 07 Step:650 loss= 0.070051797Train Epoch: 07 Step:660 loss= 0.018256038Train Epoch: 07 Step:670 loss= 0.195223376Train Epoch: 07 Step:680 loss= 0.009278720Train Epoch: 07 Step:690 loss= 0.121149674Train Epoch: 07 Step:700 loss= 0.015380275Train Epoch: 08 Step:710 loss= 0.116763875Train Epoch: 08 Step:720 loss= 0.022840688Train Epoch: 08 Step:730 loss= 0.096277334Train Epoch: 08 Step:740 loss= 0.315653145Train Epoch: 08 Step:750 loss= 0.070051856Train Epoch: 08 Step:760 loss= 0.018255942Train Epoch: 08 Step:770 loss= 0.195223376Train Epoch: 08 Step:780 loss= 0.009278720Train Epoch: 08 Step:790 loss= 0.121149503Train Epoch: 08 Step:800 loss= 0.015380275Train Epoch: 09 Step:810 loss= 0.116763793Train Epoch: 09 Step:820 loss= 0.022840688Train Epoch: 09 Step:830 loss= 0.096277334Train Epoch: 09 Step:840 loss= 0.315653145Train Epoch: 09 Step:850 loss= 0.070051923Train Epoch: 09 Step:860 loss= 0.018255910Train Epoch: 09 Step:870 loss= 0.195223585Train Epoch: 09 Step:880 loss= 0.009278766Train Epoch: 09 Step:890 loss= 0.121149339Train Epoch: 09 Step:900 loss= 0.015380275Train Epoch: 10 Step:910 loss= 0.116763711Train Epoch: 10 Step:920 loss= 0.022840671Train Epoch: 10 Step:930 loss= 0.096277304Train Epoch: 10 Step:940 loss= 0.315653145Train Epoch: 10 Step:950 loss= 0.070051856Train Epoch: 10 Step:960 loss= 0.018255973Train Epoch: 10 Step:970 loss= 0.195223376Train Epoch: 10 Step:980 loss= 0.009278720Train Epoch: 10 Step:990 loss= 0.121149503Train Epoch: 10 Step:1000 loss= 0.015380275</code></pre><p><img alt="png" data-src="/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/output_40_1.png" class="lazyload"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(loss_list)</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x22c32cef9e8&gt;]</code></pre><p><img alt="png" data-src="/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/output_41_1.png" class="lazyload"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(loss_list,<span class="string">'r+'</span>)</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x22c32d45ba8&gt;]</code></pre><p><img alt="png" data-src="/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/output_42_1.png" class="lazyload"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> loss_list <span class="keyword">if</span> x&gt;<span class="number">1</span>]</span><br></pre></td></tr></table></figure><pre><code>[1.4533501, 1.3507473, 1.7046989, 2.2887022, 1.7251762, 1.9852284, 1.1750387, 1.7792182, 1.1360258, 1.7623546, 1.132765, 1.7609351, 1.1324903, 1.7608157, 1.1324672, 1.7608054, 1.1324654, 1.7608048, 1.1324649, 1.7608048, 1.1324646, 1.7608044, 1.1324649]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å°ç»“æœ</span></span><br><span class="line">print(<span class="string">"w:"</span>, sess.run(w)) <span class="comment"># wçš„å€¼åº”è¯¥åœ¨2é™„ä»¶</span></span><br><span class="line">print(<span class="string">"b:"</span>, sess.run(b)) <span class="comment"># bçš„å€¼åº”è¯¥åœ¨1é™„è¿‘</span></span><br></pre></td></tr></table></figure><pre><code>w: 1.9070293b: 1.0205086</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯è§†åŒ–</span></span><br><span class="line">plt.scatter(x_data, y_data, label=<span class="string">"Original data"</span>)</span><br><span class="line">plt.plot(x_data,x_data * sess.run(w)+sess.run(b),label = <span class="string">"Fitted line"</span>, color = <span class="string">'r'</span>,linewidth = <span class="number">3</span>)</span><br><span class="line">plt.legend(loc = <span class="number">2</span>) <span class="comment"># é€šè¿‡å‚æ•°locæŒ‡å®šå›¾ä¾‹ä½ç½®,å·¦ä¸Šè§’æ ‡ç­¾æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.legend.Legend at 0x22c32da9c50&gt;</code></pre><p><img alt="png" data-src="/2020/01/06/20200106-TensorFlow%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%8F%98%E9%87%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/output_45_1.png" class="lazyload"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> xs,ys <span class="keyword">in</span> zip(x_data, y_data):</span><br><span class="line">    print(xs, ys)</span><br></pre></td></tr></table></figure><pre><code>-1.0 -0.8296403329862183-0.9797979797979798 -0.907915867983997-0.9595959595959596 -0.6940069139116888-0.9393939393939394 -0.44008198904613316-0.9191919191919192 -0.518056298082633-0.898989898989899 -0.8872131046936622-0.8787878787878788 0.06789250806751634-0.8585858585858586 -0.7121223166059172-0.8383838383838383 -1.0266771956105798-0.8181818181818181 -0.8591953886106469-0.797979797979798 -0.6488803761421159-0.7777777777777778 -0.7072455496370039-0.7575757575757576 -0.5902689976300266-0.7373737373737373 -0.3485610146594407-0.7171717171717171 -1.7479096133940975-0.696969696969697 -0.7054166950286986-0.6767676767676767 0.02660252968277821-0.6565656565656566 -0.0879307925836007-0.6363636363636364 -0.5449888988689496-0.6161616161616161 -0.4821245885002341-0.5959595959595959 0.26427918331828665-0.5757575757575757 -0.2506067288023764-0.5555555555555556 -0.3231932210702846-0.5353535353535352 0.6715786910122715-0.5151515151515151 -0.17825188097185915-0.4949494949494949 0.2837997365730506-0.4747474747474747 0.03223693168166275-0.4545454545454545 0.11122375083990527-0.43434343434343425 -0.24757709110216308-0.41414141414141414 -0.15907779562657415-0.3939393939393939 0.7153506547917942-0.3737373737373737 -0.20303085077192035-0.3535353535353535 0.4038733399023537-0.33333333333333326 -0.14444505243328032-0.31313131313131304 0.2775626397745727-0.2929292929292928 0.39925810781510473-0.2727272727272727 -0.19732590501344383-0.2525252525252525 0.9488948450886014-0.23232323232323226 0.46183376274541277-0.21212121212121204 1.0616526671192374-0.19191919191919182 0.24245017816545178-0.1717171717171716 1.0213106217668546-0.1515151515151515 1.6306657350096654-0.13131313131313127 0.8239865196438662-0.11111111111111105 0.5189503868361454-0.09090909090909083 1.0096642401086826-0.07070707070707061 0.9149167196744973-0.050505050505050386 0.8149904585811949-0.030303030303030276 0.8911912817877188-0.010101010101010055 0.74826766678925940.010101010101010166 1.18974905751868580.030303030303030498 0.90567351526606330.05050505050505061 0.75826284168208970.07070707070707072 1.46753969864337640.09090909090909105 1.11549177457064670.11111111111111116 2.28036360037980760.1313131313131315 1.16283831200039220.1515151515151516 1.01609514505545740.1717171717171717 1.12363541048898670.19191919191919204 1.53227316407232880.21212121212121215 1.1453041019262370.2323232323232325 0.95932599938001550.2525252525252526 2.1607354389680980.27272727272727293 1.0493966910905730.29292929292929304 2.19131689305766160.31313131313131315 1.6826852528906240.3333333333333335 1.24182748311133850.3535353535353536 2.3736228676983310.3737373737373739 1.6660933058664980.39393939393939403 1.38485977664746620.41414141414141437 1.85444665199489460.4343434343434345 2.3832651640036880.4545454545454546 2.18258823597854820.4747474747474749 2.27999286786918940.49494949494949503 2.69163351959694850.5151515151515154 2.116128624114660.5353535353535355 2.22103298487163150.5555555555555556 2.02071744491074150.5757575757575759 1.56963760307356330.595959595959596 2.134105328006630.6161616161616164 2.87911475452715050.6363636363636365 1.58030582148225430.6565656565656568 2.85070976699570530.6767676767676769 2.45815118309388270.696969696969697 2.02973165236894550.7171717171717173 2.46053123064597120.7373737373737375 3.1852763264068410.7575757575757578 2.28589823980159720.7777777777777779 2.87179300071438660.7979797979797982 3.0485651854539460.8181818181818183 2.27752603736069140.8383838383838385 2.92985242154697460.8585858585858588 2.93123377822040960.8787878787878789 2.56791479345059330.8989898989898992 3.07197416373106340.9191919191919193 2.69390616428374850.9393939393939394 2.64781590499802370.9595959595959598 2.4253001195389720.9797979797979799 3.11378791689627481.0 2.82832400301817</code></pre><h2 id="è¿›è¡Œé¢„æµ‹"><a href="#è¿›è¡Œé¢„æµ‹" class="headerlink" title="è¿›è¡Œé¢„æµ‹"></a>è¿›è¡Œé¢„æµ‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x_test = <span class="number">3.21</span></span><br><span class="line"></span><br><span class="line">predict = sess.run(pred, feed_dict = &#123;x:x_test&#125;)</span><br><span class="line">print(<span class="string">"é¢„æµ‹å€¼ï¼š%f"</span> %predict)</span><br><span class="line"></span><br><span class="line">target = <span class="number">2</span> * x_test +<span class="number">1.0</span></span><br><span class="line">print(<span class="string">"ç›®æ ‡å€¼ï¼š%f"</span> %target)</span><br></pre></td></tr></table></figure><pre><code>é¢„æµ‹å€¼ï¼š7.142073ç›®æ ‡å€¼ï¼š7.420000</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç­‰ä»·äºä¸Šé¢çš„predict</span></span><br><span class="line">x_test = <span class="number">3.21</span></span><br><span class="line">predict = sess.run(w) * x_test + sess.run(b)</span><br><span class="line">print(<span class="string">"é¢„æµ‹å€¼ï¼š%f"</span> %predict)</span><br></pre></td></tr></table></figure><pre><code>é¢„æµ‹å€¼ï¼š7.142073</code></pre>]]></content>
    
    <summary type="html">
    
      TensorFlowå®ç°å•å˜é‡çº¿æ€§å›å½’
    
    </summary>
    
    
      <category term="TensorFlow" scheme="https://smallbenxiong.github.io/categories/TensorFlow/"/>
    
    
      <category term="TensorFlow" scheme="https://smallbenxiong.github.io/tags/TensorFlow/"/>
    
      <category term="æ·±åº¦å­¦ä¹ " scheme="https://smallbenxiong.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="çº¿æ€§å›å½’" scheme="https://smallbenxiong.github.io/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>Sqoop | SqoopæŠ¥é”™è§£å†³</title>
    <link href="https://smallbenxiong.github.io/2019/12/20/20191220-Sqoop%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/"/>
    <id>https://smallbenxiong.github.io/2019/12/20/20191220-Sqoop%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</id>
    <published>2019-12-19T16:00:00.000Z</published>
    <updated>2019-12-20T01:54:51.873Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="Sqoop-SqoopæŠ¥é”™è§£å†³"><a href="#Sqoop-SqoopæŠ¥é”™è§£å†³" class="headerlink" title="Sqoop | SqoopæŠ¥é”™è§£å†³"></a>Sqoop | SqoopæŠ¥é”™è§£å†³</h1><h2 id="Job-failed-as-tasks-failed"><a href="#Job-failed-as-tasks-failed" class="headerlink" title="Job failed as tasks failed."></a>Job failed as tasks failed.</h2><pre><code>19/12/20 06:43:56 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1576794672412_000119/12/20 06:43:58 INFO impl.YarnClientImpl: Submitted application application_1576794672412_000119/12/20 06:43:58 INFO mapreduce.Job: The url to track the job: http://bp01:8088/proxy/application_1576794672412_0001/19/12/20 06:43:58 INFO mapreduce.Job: Running job: job_1576794672412_000119/12/20 06:44:17 INFO mapreduce.Job: Job job_1576794672412_0001 running in uber mode : false19/12/20 06:44:17 INFO mapreduce.Job:  map 0% reduce 0%19/12/20 06:44:25 INFO mapreduce.Job:  map 100% reduce 0%19/12/20 06:44:27 INFO mapreduce.Job: Job job_1576794672412_0001 failed with state FAILED due to: Task failed   task_1576794672412_0001_m_000000Job failed as tasks failed. failedMaps:1 failedReduces:0</code></pre><p><strong>è§£å†³ï¼š<br>æŸ¥çœ‹æ—¥å¿—:/opt/hadoop/hadoop-2.7.6/logs/userlogs/application_1576794672412_0006/container_1576794672412_0006_01_000002</strong>   </p><pre><code>2019-12-20 07:12:27,425 WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : java.io.IOException:   com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column  &apos;gender&apos; at row 1Caused by: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long   for column &apos;gender&apos; at row 1</code></pre><p><strong>ï¼ï¼ Data too long for column  â€˜genderâ€™ at row 1</strong></p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/sunjinjuan/article/details/88854091" target="_blank" rel="noopener">sqoopä»hiveå¯¼å‡ºåˆ°mysqlæŠ¥é”™ï¼šfailed with state FAILED due to: Task failed</a></p><hr><h2 id="Hiveå¯¼å…¥MySQLçš„æ•°æ®å…¨éƒ¨å‡ºç°åœ¨åŒä¸€åˆ—"><a href="#Hiveå¯¼å…¥MySQLçš„æ•°æ®å…¨éƒ¨å‡ºç°åœ¨åŒä¸€åˆ—" class="headerlink" title="Hiveå¯¼å…¥MySQLçš„æ•°æ®å…¨éƒ¨å‡ºç°åœ¨åŒä¸€åˆ—"></a>Hiveå¯¼å…¥MySQLçš„æ•°æ®å…¨éƒ¨å‡ºç°åœ¨åŒä¸€åˆ—</h2><pre><code>Hiveæ•°æ®+------------------------+------------------------+--+| interim_gender.gender  | interim_gender.amount  |+------------------------+------------------------+--+| 0                      | 33232                  || 1                      | 33215                  || 2                      | 33553                  |+------------------------+------------------------+--+</code></pre><p>å¯¼å…¥ï¼šsqoop export â€“connect jdbc:mysql://192.168.43.122:3306/mall â€“username root â€“password *** â€“table gender â€“input-fields-terminated-by â€˜\001â€™ â€“export-dir â€˜/user/hive/warehouse/mall.db/interim_genderâ€™ -m 1;</p><pre><code>MySQLæ•°æ®+----------+---------+--+|  gender  | amount  |+----------+---------+--+| 1    33215  | NULL    || 2    33553  | NULL    || 0    33232  | NULL    |+----------+---------+--+</code></pre><p><strong>è§£å†³ï¼š<br>æŸ¥çœ‹Hiveæ•°æ®æ ¼å¼</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hadoop fs -cat &#x2F;user&#x2F;hive&#x2F;warehouse&#x2F;mall.db&#x2F;interim_gender&#x2F;000000_0</span><br><span class="line">033232</span><br><span class="line">133215</span><br><span class="line">233553</span><br></pre></td></tr></table></figure><p><strong>æ•°æ®ç”±Tabé”®åˆ†å‰²,æ”¹ä¸ºï¼š<code>--fields-terminated-by &#39;\t&#39;</code> å³å¯ã€‚</strong></p><h2 id="ä½›ç³»æ›´æ–°â€¦â€¦"><a href="#ä½›ç³»æ›´æ–°â€¦â€¦" class="headerlink" title="ä½›ç³»æ›´æ–°â€¦â€¦"></a>ä½›ç³»æ›´æ–°â€¦â€¦</h2>]]></content>
    
    <summary type="html">
    
      Sqoopé‡åˆ°çš„é—®é¢˜
    
    </summary>
    
    
      <category term="Hadoop" scheme="https://smallbenxiong.github.io/categories/Hadoop/"/>
    
    
      <category term="Sqoop" scheme="https://smallbenxiong.github.io/tags/Sqoop/"/>
    
      <category term="Hadoop" scheme="https://smallbenxiong.github.io/tags/Hadoop/"/>
    
      <category term="BigData" scheme="https://smallbenxiong.github.io/tags/BigData/"/>
    
      <category term="å¤§æ•°æ®" scheme="https://smallbenxiong.github.io/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://smallbenxiong.github.io/2019/12/15/hello-world/"/>
    <id>https://smallbenxiong.github.io/2019/12/15/hello-world/</id>
    <published>2019-12-14T16:00:00.000Z</published>
    <updated>2020-01-06T14:32:48.301Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><ul><li><strong>è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œä¸»è¦ç”¨äºè®°å½•è‡ªå·±çš„å­¦ä¹ ç¬”è®°ï¼Œæœªç”³è¯·ç™¾åº¦ã€è°·æ­Œç­‰æœç´¢åŠŸèƒ½ï¼Œåªèƒ½é€šè¿‡åŸŸåè®¿é—®ã€‚ğŸ˜ğŸ˜ğŸ˜</strong>   </li><li><strong>å¦‚æœè½¬è½½äº†æ‚¨çš„æ–‡ç« ï¼Œæˆ‘ä¼šè¿›è¡Œæ ‡æ³¨ï¼Œä¸»è¦æ˜¯æ–¹ä¾¿è‡ªå·±æµè§ˆå’Œå­¦ä¹ ï¼Œå¦‚æœæ‚¨ä»‹æ„çš„è¯éº»çƒ¦æ‚¨ç•™ä¸ªè¨€ï¼Œæˆ‘é©¬ä¸Šåˆ é™¤ã€‚ğŸ¤ğŸ™†â€â™€ï¸ğŸ™†â€â™‚ï¸</strong>   </li><li><strong>å¦‚æœæ‚¨æ­£å¥½æµè§ˆåˆ°æˆ‘çš„ç½‘é¡µï¼Œé‚£å¯çœŸæ˜¯å¤ªæœ‰ç¼˜äº†ï¼Œç•™ä¸ªè¨€å†èµ°é¸­é¸­é¸­ã€‚ğŸ™„ğŸ™„ğŸ™„</strong></li></ul><hr><h1 id="å…³äºåšå®¢"><a href="#å…³äºåšå®¢" class="headerlink" title="å…³äºåšå®¢"></a>å…³äºåšå®¢</h1><p>æœ¬<a href="https://smallbenxiong.github.io/">åšå®¢</a>æ˜¯æ­å»ºåœ¨<a href="https://github.com/smallbenxiong" target="_blank" rel="noopener">GitHub</a>ä¸Šä½¿ç”¨çš„é™æ€ç½‘é¡µï¼Œç½‘é¡µä½¿ç”¨äº†<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>ï¼Œè¿™è®©æˆ‘çš„åšå®¢æ­å»ºå˜å¾—éå¸¸å¿«æ·ï¼Œéå¸¸ç¾è§‚ï¼Œè€Œä¸”å®Œç¾é€‚é…æ‰‹æœºç«¯æµè§ˆã€‚ä½¿ç”¨çš„ä¸»é¢˜ä¸º<a href="https://demo.jerryc.me/" target="_blank" rel="noopener">Butterfly</a>ã€‚<br>åŒæ—¶è¿™ä¹Ÿæ˜¯ä¸€ç¯‡ä»‹ç»åŠŸèƒ½ä½¿ç”¨å’Œæµ‹è¯•åŠŸèƒ½çš„æ–‡ç« ï¼Œæ–‡ç« æŒç»­æ›´æ–°ï¼</p><h1 id="åšå®¢ä½¿ç”¨æ–¹æ³•"><a href="#åšå®¢ä½¿ç”¨æ–¹æ³•" class="headerlink" title="åšå®¢ä½¿ç”¨æ–¹æ³•"></a>åšå®¢ä½¿ç”¨æ–¹æ³•</h1><h2 id="æ ¼å¼è®¾ç½®"><a href="#æ ¼å¼è®¾ç½®" class="headerlink" title="æ ¼å¼è®¾ç½®"></a>æ ¼å¼è®¾ç½®</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top_img: ï¼ˆé™¤éç‰¹å®šéœ€è¦ï¼Œå¯ä»¥ä¸å†™ï¼‰</span><br><span class="line">comments  æ˜¯å¦æ˜¾ç¤ºè¯„è®ºï¼ˆé™¤éè®¾ç½®false,å¯ä»¥ä¸å†™ï¼‰</span><br><span class="line">cover:  ç¼©ç•¥å›¾</span><br><span class="line">toc:  æ˜¯å¦æ˜¾ç¤ºtoc ï¼ˆé™¤éç‰¹å®šæ–‡ç« è®¾ç½®ï¼Œå¯ä»¥ä¸å†™ï¼‰</span><br><span class="line">toc_number: æ˜¯å¦æ˜¾ç¤ºtocæ•°å­— ï¼ˆé™¤éç‰¹å®šæ–‡ç« è®¾ç½®ï¼Œå¯ä»¥ä¸å†™ï¼‰</span><br><span class="line">copyright: æ˜¯å¦æ˜¾ç¤ºç‰ˆæƒ ï¼ˆé™¤éç‰¹å®šæ–‡ç« è®¾ç½®ï¼Œå¯ä»¥ä¸å†™ï¼‰</span><br><span class="line">default_cover:</span><br><span class="line">top: </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="ä¸æ˜¾ç¤ºç‰ˆæƒ"><a href="#ä¸æ˜¾ç¤ºç‰ˆæƒ" class="headerlink" title="ä¸æ˜¾ç¤ºç‰ˆæƒ"></a>ä¸æ˜¾ç¤ºç‰ˆæƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœæœ‰æ–‡ç« ï¼ˆä¾‹å¦‚ï¼šè½¬è½½æ–‡ç« ï¼‰ä¸éœ€è¦æ˜¾ç¤ºç‰ˆæƒï¼Œå¯ä»¥åœ¨æ–‡ç« Front-matterå•ç‹¬è®¾ç½®</span><br><span class="line">$ copyright: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="æ–‡ç« å°é¢"><a href="#æ–‡ç« å°é¢" class="headerlink" title="æ–‡ç« å°é¢"></a>æ–‡ç« å°é¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ç« çš„markdownæ–‡æ¡£ä¸Š,åœ¨Front-matteræ·»åŠ coverï¼Œå¹¶å¡«ä¸Šè¦æ˜¾ç¤ºçš„å›¾ç‰‡åœ°å€ã€‚</span><br><span class="line">å½“é…ç½®å¤šå¼ å›¾ç‰‡æ—¶ï¼Œä¼šéšæœºé€‰æ‹©ä¸€å¼ ä½œä¸ºcoverã€‚æ­¤æ—¶å†™æ³•åº”ä¸ºï¼š</span><br><span class="line">default_cover:</span><br><span class="line">  - https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png</span><br><span class="line">  - https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png</span><br><span class="line">  - https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png</span><br></pre></td></tr></table></figure><h3 id="æ–‡ç« ç½®é¡¶"><a href="#æ–‡ç« ç½®é¡¶" class="headerlink" title="æ–‡ç« ç½®é¡¶"></a>æ–‡ç« ç½®é¡¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æ–‡ç« çš„front-matteråŒºåŸŸé‡Œæ·»åŠ top: Trueå±æ€§æ¥æŠŠè¿™ç¯‡æ–‡ç« ç½®é¡¶ã€‚</span><br><span class="line">$ top: True</span><br></pre></td></tr></table></figure><h2 id="æœç´¢ç³»ç»Ÿ"><a href="#æœç´¢ç³»ç»Ÿ" class="headerlink" title="æœç´¢ç³»ç»Ÿ"></a>æœç´¢ç³»ç»Ÿ</h2><p>æœç´¢ç³»ç»Ÿä½¿ç”¨<a href="https://www.algolia.com/" target="_blank" rel="noopener">Algolia</a>ï¼Œé…ç½®å‚è€ƒ<a href="https://github.com/oncletom/hexo-algolia" target="_blank" rel="noopener">hexo-algolia</a>ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span>(windowsä¸º<span class="built_in">set</span>) HEXO_ALGOLIA_INDEXING_KEY=&#123;your key&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°Algoliaåº“"><a href="#æ›´æ–°Algoliaåº“" class="headerlink" title="æ›´æ–°Algoliaåº“"></a>æ›´æ–°Algoliaåº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo algolia</span><br></pre></td></tr></table></figure><h2 id="éŸ³ä¹è®¾ç½®"><a href="#éŸ³ä¹è®¾ç½®" class="headerlink" title="éŸ³ä¹è®¾ç½®"></a>éŸ³ä¹è®¾ç½®</h2><p>ä½¿ç”¨<a href="https://github.com/MoePlayer/hexo-tag-aplayer" target="_blank" rel="noopener">hexo-tag-aplayer</a>çš„MeingJSæ’ä»¶ï¼Œå‚è€ƒ<a href="https://wiki.hushhw.cn/posts/a84d1ef1.html" target="_blank" rel="noopener">aplayeræ’­æ”¾å™¨é…ç½®</a> ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. å•é¦–è®¾ç½®</span><br><span class="line">$ &#123;% meting <span class="string">"3986040"</span> <span class="string">"netease"</span> <span class="string">"song"</span> <span class="string">"theme:#555"</span> <span class="string">"mutex:true"</span> <span class="string">"listmaxheight:340px"</span> <span class="string">"preload:auto"</span> %&#125;</span><br><span class="line">2. åˆ—è¡¨è®¾ç½®</span><br><span class="line">$ &#123;% meting <span class="string">"627070825"</span> <span class="string">"netease"</span> <span class="string">"playlist"</span> <span class="string">"theme:#555"</span> <span class="string">"mutex:true"</span> <span class="string">"listmaxheight:340px"</span> <span class="string">"preload:auto"</span> %&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><h3 id="ç”Ÿæˆé™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶"></a>ç”Ÿæˆé™æ€æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²è‡³github"><a href="#éƒ¨ç½²è‡³github" class="headerlink" title="éƒ¨ç½²è‡³github"></a>éƒ¨ç½²è‡³github</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><h1 id="èµåŠ©"><a href="#èµåŠ©" class="headerlink" title="èµåŠ©"></a>èµåŠ©</h1><table><thead><tr><th align="center">ç”¨æˆ·å</th><th align="center">é‡‘é¢/å…ƒ</th><th align="center">ç•™è¨€</th></tr></thead><tbody><tr><td align="center">Ben</td><td align="center">99</td><td align="center">Thanksï¼</td></tr><tr><td align="center">â€¦</td><td align="center">â€¦</td><td align="center">â€¦</td></tr></tbody></table><p>More info: <a href="https://smallbenxiong.github.io/">Ben Blog</a></p>]]></content>
    
    <summary type="html">
    
      åšå®¢çš„ä½¿ç”¨æ–¹æ³•
    
    </summary>
    
    
      <category term="Blog" scheme="https://smallbenxiong.github.io/categories/Blog/"/>
    
    
      <category term="Blog" scheme="https://smallbenxiong.github.io/tags/Blog/"/>
    
  </entry>
  
</feed>
